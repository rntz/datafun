\usepackage{amssymb,amsmath,amsthm}
\usepackage{latexsym}

\usepackage{url}
\usepackage{hyperref}

%% uses the AMS Euler math font.
\usepackage{euler}

%% for coloneqq
\usepackage{mathtools}

%% for \underaccent
\usepackage{accents}

% for semantic brackets
\usepackage{stmaryrd}

% for inference rules
\usepackage{proof}

%% for mathpar environment
\usepackage{mathpartir}

% for \scalebox, \rotatebox
\usepackage{graphicx}

%% for colors
\usepackage{color}

%% My commands

\newcommand{\omitted}[1]{{\color{red}#1}}
\newcommand{\todo}[1]{\noindent{\color{red}#1}}
\newcommand{\TODO}{\todo{TODO}}

\newcommand{\ms}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\mi}[1]{\ensuremath{\mathit{#1}}}
\newcommand{\mc}[1]{\ensuremath{\mathcal{#1}}}
\newcommand{\fname}{\ms}
\newcommand{\ent}{\vdash}
\newcommand{\fn}{\lambda}
\newcommand{\binder}{.\,}
\newcommand{\bind}[1]{#1\binder}
\newcommand{\pipe}{\hspace{0.5em}|\hspace{0.5em}}
\newcommand{\of}{\,{:}\,}
\newcommand{\widevec}[1]{\overrightarrow{#1}}
%% equality pattern testing
\newcommand{\bound}[1]{!{#1}}

\newcommand{\bnfeq}{\dblcolon=}
\newcommand{\defeq}{\overset{\ms{def}}{=}}
%% \newcommand{\expandsto}{\Longrightarrow}
\newcommand{\expandsto}{\xrightarrow{\text{expand}}}


%% judgments & rules
\newcommand{\GD}{\Delta}
\newcommand{\GG}{\Gamma}
\newcommand{\J}[4]{{#1};\,{#2}\ent {#3}:{#4}}
\newcommand{\Jp}[5]{{#1};\,{#2}\ent {#3}:{#4} \Rightarrow {#5}}
\newcommand{\Jl}[4]{{#1};\,{#2}\ent {#3} \Rightarrow {#4}}
\newcommand{\isfinite}[1]{#1\ \ms{finite}}

\newcommand{\monofn}{\lambda^+}


%% types
\newcommand{\N}{\mathbb{N}}
\newcommand{\str}{\ms{str}}
\newcommand{\bool}{2}
\newcommand{\tzero}{\mathbb{0}}
\newcommand{\tunit}{\mathbb{1}}
\newcommand{\x}{\times}
%% ``monotone \to''
\newcommand{\mto}{\overset{+\:}{\to}}
\newcommand{\Pfin}{\mc{P}_{\ms{fin}}}
\newcommand{\Set}[1]{\{#1\}}
\newcommand{\Map}[2]{\ensuremath{\{{#1}\!: {#2}\}}}
\newcommand{\Bag}[1]{{#1}^*}
%% lexical types
\newcommand{\lsum}{\lhd}
\newcommand{\lprod}{\mathop{\x_\lhd}}
\newcommand{\eq}[1]{\underaccent{\mathit{eq}}{#1}}
\newcommand{\fineq}[1]{\underaccent{\mathit{fin}}{#1}}


%% expressions
%% \renewcommand{\v}[1]{\mi{#1}}                %ordinary variables
\newcommand{\m}[1]{\ensuremath{\mathbf{#1}}}  %monotone variable
\newcommand{\sub}[1]{[#1]\,}                   % substitution
\newcommand{\fix}[1]{\ms{fix}~{#1}~\ms{is}~}
\newcommand{\fixle}[2]{\fix{#1 \le #2}}
\newcommand{\tuple}[1]{\langle{#1}\rangle}
\newcommand{\pair}[2]{\tuple{#1,\,#2}}
\newcommand{\triple}[3]{\tuple{#1,\,#2,\,#3}}
\newcommand{\triv}{\tuple{}}
\newcommand{\unit}{\varepsilon}
\newcommand{\forin}[1]{\textstyle\bigvee({#1})\ }
\newcommand{\letin}[3]{\forin{#1 \in #2}{#3}}
\newcommand{\letv}[3]{\ms{let}\;{#1}={#2}\;\ms{in}\;{#3}}
\newcommand{\rawcase}[2]{\ms{case}~{#1}~\ms{of}~{#2}}
\newcommand{\cto}{\shortrightarrow} % "case to"
\newcommand{\case}[5]{%
\rawcase{#1}{\ms{in}_1\,{#2}\cto{#3};\,\ms{in}_2\,{#4}\cto{#5}}}
\newcommand{\casep}[4]{%
\rawcase{#1}{{#2}\cto{#3};\,\pwild\cto{#4}}}

\newcommand{\ifthen}[3]{\ms{if}~{#1}~\ms{then}~{#2}~\ms{else}~{#3}}

\newcommand{\setlit}[1]{\{#1\}}
\newcommand{\singleset}[1]{\setlit{#1}}

\newcommand{\maplit}[1]{\{#1\}}
\newcommand{\kv}[2]{#1{:}\,#2}
\newcommand{\singlemap}[2]{\maplit{\kv{#1}{#2}}}

\newcommand{\setfor}[2]{\setlit{{#1}~|~{#2}}}
\newcommand{\isin}{\mathrel{{\in}\hspace{0.15ex}?}}


%% patterns
\newcommand{\pwild}{\underline{\phantom{a}}}

\newcommand{\ctor}[1]{\textsc{#1}}


%% semantics
\newcommand{\den}[1]{\ensuremath{\llbracket{#1}\rrbracket}} % denotation
% denotation for vertically large things
\newcommand{\Den}[1]{\left\llbracket{#1}\right\rrbracket}
\newcommand{\one}{\ensuremath{\mathbf{1}}}
\newcommand{\two}{\ensuremath{\mathbf{2}}}
%% \newcommand{\Arr}{\supset}
\newcommand{\Arr}{\rightarrowtriangle}
\newcommand{\arr}{\Rightarrow}
\newcommand{\lol}{\multimap}
\newcommand{\Disc}[1]{\ensuremath{\ms{Disc}\;{#1}}}
\newcommand{\slF}{\ensuremath{\mathcal{F}}}
\newcommand{\slU}{\ensuremath{\mathcal{U}}}
\newcommand{\stringset}{\mathbb{S}}
\newcommand{\natposet}{\N_\le}
\newcommand{\below}[2]{\ensuremath{\downarrow\!({#1 : #2})}}
\newcommand{\lfpin}[2]{\text{lfp}\,{#2} \in {#1}}

\newcommand{\sff}{\ms{ff}}
\newcommand{\stt}{\ms{tt}}

%% categories
\newcommand{\cSet}{\ms{Set}}
\newcommand{\cPoset}{\ms{Poset}}
\newcommand{\cSL}{\ms{SemiLat}}

%% theorem environments
\newtheorem{theorem}{Theorem}
\newtheorem{corollary}{Corollary}
\newtheorem{lemma}{Lemma}

\theoremstyle{definition}
\newtheorem{definition}{Definition}

%% operational semantics & logical relations

%% preorder notation
\newcommand{\ale}{\sqsubseteq}
\newcommand{\alt}{\sqsubset}
\newcommand{\aeq}{\equiv}

%% \newcommand{\ordle}{\ale}
%% \newcommand{\ordeq}{\simeq}
%% \newcommand{\eqposet}[1]{\ms{Eq}(#1)}
%% \renewcommand{\eqposet}[1]{\|{#1}\|}

%% \newcommand{\eqclass}[1]{[#1]}
%% \newcommand{\height}{\ms{height}}
%% \newcommand{\elemheight}[2]{\height(#2 : #1)}

%% \newcommand{\dom}[1]{\mathrm{dom}(#1)}
%% \newcommand{\expope}[2]{#1 \Rightarrow #2}

%% commands used in commutative/transitive diagrams
\newcommand{\ALER}{\arrow[no line]{r}{\rotatebox[origin=c]{0}{\scalebox{1.33}{$\ale$}}}}
\newcommand{\ALED}{\arrow[no line]{d}{\rotatebox[origin=c]{-90}{\scalebox{1.33}{$\ale$}}}}

%% type-annotated semilattice operatoins
\newcommand{\tforin}[2]{\bigvee_{#1}(#2)\ }
\newcommand{\tfix}[2]{\ms{fix}_{#1}~{#2}~\ms{is}~}
\newcommand{\tfixle}[3]{\tfix{#1}{#2 \le #3}}

\newcommand{\hole}{[\,]}

%% iteration forms, used in evalution of fix
\newcommand{\iter}[4]{\ms{iter}_{#1}({#2}; \bind{#3}#4)}
\newcommand{\iterstep}[5]{\ms{iter}_{#1}({#2}; {#3}; {\bind{#4}#5})}
\newcommand{\iterle}[5]{\ms{iter}_{{\le}#1}({#2}; {#3}; \bind{#4}{#5})}
\newcommand{\iterlestep}[6]{\ms{iter}_{{\le}#1}({#2}; {#3}; {#4}; \bind{#5}{#6})}

\newcommand{\step}{\mapsto}
\newcommand{\steps}{\step^*}
%% \newcommand{\betaeq}{\leftrightarrow}

\newcommand{\disc}[1]{\square{#1}}

\newcommand{\lr}[2]{#2\mathrel{|}#1}
\newcommand{\lrcx}[3]{#1 \ent \lr{#2}{#3}}
\newcommand{\commsq}[5]{\lr{#1}{{#2}, {#4} \ale {#3}, {#5}}}

%% \newcommand{\lrof}[1]{\ms{T}[#1]}
%% \newcommand{\Val}[1]{\ms{V}[#1]}
